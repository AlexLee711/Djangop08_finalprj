<!-- polldetails.html (Final_PRJ) -->
{% extends "base.html" %}
{% block title %} 天天誼家公寓管理網{% endblock %}
{% block content %}
<div class="container">
    {% for message in messages %}
    <div class='alert alert-{{ message.tags }}'>{{ message }}</div>
    {% endfor %}
    <h1>{{ poll.subject }}</h1>
    <hr>
    {% if poll.enabled %}
    <p>目前投票狀況：</p>
    {% else %}
    <p>投票結果：</p>
    {% endif %}
    <ul>
        {% for option in options %}
        <li>{{ option.title }} - 投票數 {{ option.count }} 票</li>
        {% endfor %}
    </ul>
    {% if not poll.enabled %}
    <h3>投票結果：</h3>
    <h4 style="color: red">得票數最高的選項是：{{ top_option.title }} ({{ top_option.count }} 票)</h4>
    {% else %}
    <h3>請選擇您的選項：</h3>
        <form method="post" action="{% url 'vote' poll.id %}">
            {% csrf_token %}
            {% for option in options %}
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="option" id="option{{ option.id }}" value="{{ option.id }}">
                    <label class="form-check-label" for="option{{ option.id }}">
                        {{ option.title }}
                    </label>
                </div>
            {% endfor %}
            
            <button type="submit" class="btn btn-primary">提交投票</button>
        </form>
    {% endif %}
    <hr>
    <a class="btn btn-info" href="/poll" role="button">返回投票頁面</a>
</div>
{% endblock %}